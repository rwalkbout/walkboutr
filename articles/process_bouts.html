<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="walkboutr">
<title>Generate Walk Bouts â€¢ walkboutr</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Generate Walk Bouts">
<meta property="og:description" content="walkboutr">
<meta property="og:image" content="https://rwalkbout.github.io/walkboutr/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">walkboutr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/changing_default_parameters.html">Changing Default Parameters</a>
    <a class="dropdown-item" href="../articles/generate_data.html">Generate Data</a>
    <a class="dropdown-item" href="../articles/process_bouts.html">Generate Walk Bouts</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/rwalkbout/walkboutr/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Generate Walk Bouts</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/rwalkbout/walkboutr/blob/HEAD/vignettes/process_bouts.Rmd" class="external-link"><code>vignettes/process_bouts.Rmd</code></a></small>
      <div class="d-none name"><code>process_bouts.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/rwalkbout/walkboutr" class="external-link">walkboutr</a></span><span class="op">)</span></span></code></pre></div>
The <code>walkboutr</code> package will process GPS and accelerometry
data and create two different outputs:
<p>
</p>
<ol style="list-style-type: decimal">
<li>
<strong>Full dataset</strong>: This dataframe contains all of the
original data (latitude, longitude, activity counts) as well as the
epoch start time. This time will match the times associated with the
accelerometry data, and the GPS data have been matched up to the closest
accelerometry epochs. The time variable returned, thus, reflects that of
the accelerometry data. <em>Note: GPS data are assigned to an epoch
start time by rounding down the time associated with the GPS datapoint
to the nearest epoch start time. For example, if epochs in the
accelerometry data are 30 seconds, the time associated with a GPS data
point will be rounded down to the nearest 30-second increment.</em>
<p></p>
</li>
<li>
<strong>Summarized dataset</strong>: This dataframe does not contain
any of the original GPS/accelerometry data, and is thus completely
de-identified and shareable. The output contains one row for each bout
(walking or otherwise) as well as information on the median speed for
that bout, whether there was a complete day worth of data for the bout,
the start time of the bout, the duration in minutes, and the bout
category. More details on bout category can be found below.</li>
</ol>
<p>First we will generate some sample data:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gps_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/generate_walking_in_seattle_gps_data.html">generate_walking_in_seattle_gps_data</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">accelerometry_counts</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/make_full_day_bout_without_metadata.html">make_full_day_bout_without_metadata</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>Now that we have sample data, we can look at how
<code>walkboutr</code> generates bouts:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">walk_bouts</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/identify_walk_bouts_in_gps_and_accelerometry_data.html">identify_walk_bouts_in_gps_and_accelerometry_data</a></span><span class="op">(</span><span class="va">gps_data</span>, <span class="va">accelerometry_counts</span><span class="op">)</span></span>
<span><span class="va">summary_walk_bouts</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/summarize_walk_bouts.html">summarize_walk_bouts</a></span><span class="op">(</span><span class="va">walk_bouts</span><span class="op">)</span></span></code></pre></div>
<p>The bouts identified look like this:</p>
<table class="table">
<colgroup>
<col width="4%">
<col width="12%">
<col width="14%">
<col width="18%">
<col width="11%">
<col width="11%">
<col width="8%">
<col width="9%">
<col width="9%">
</colgroup>
<thead><tr class="header">
<th align="right">bout</th>
<th align="left">bout_category</th>
<th align="right">activity_counts</th>
<th align="left">time</th>
<th align="left">non_wearing</th>
<th align="left">complete_day</th>
<th align="right">latitude</th>
<th align="right">longitude</th>
<th align="right">speed</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="right">1</td>
<td align="left">non_walk_slow</td>
<td align="right">500</td>
<td align="left">2012-04-07 00:03:30</td>
<td align="left">FALSE</td>
<td align="left">TRUE</td>
<td align="right">47.62508</td>
<td align="right">122.3510</td>
<td align="right">0.9995464</td>
</tr>
<tr class="even">
<td align="right">1</td>
<td align="left">non_walk_slow</td>
<td align="right">500</td>
<td align="left">2012-04-07 00:02:30</td>
<td align="left">FALSE</td>
<td align="left">TRUE</td>
<td align="right">47.61874</td>
<td align="right">122.3446</td>
<td align="right">0.8348447</td>
</tr>
<tr class="odd">
<td align="right">1</td>
<td align="left">non_walk_slow</td>
<td align="right">500</td>
<td align="left">2012-04-07 00:03:00</td>
<td align="left">FALSE</td>
<td align="left">TRUE</td>
<td align="right">47.62199</td>
<td align="right">122.3479</td>
<td align="right">0.6335497</td>
</tr>
<tr class="even">
<td align="right">1</td>
<td align="left">non_walk_slow</td>
<td align="right">500</td>
<td align="left">2012-04-07 00:05:30</td>
<td align="left">FALSE</td>
<td align="left">TRUE</td>
<td align="right">47.64308</td>
<td align="right">122.3690</td>
<td align="right">0.9944386</td>
</tr>
<tr class="odd">
<td align="right">1</td>
<td align="left">non_walk_slow</td>
<td align="right">500</td>
<td align="left">2012-04-07 00:06:00</td>
<td align="left">FALSE</td>
<td align="left">TRUE</td>
<td align="right">47.64769</td>
<td align="right">122.3736</td>
<td align="right">1.2970529</td>
</tr>
<tr class="even">
<td align="right">1</td>
<td align="left">non_walk_slow</td>
<td align="right">500</td>
<td align="left">2012-04-07 00:06:30</td>
<td align="left">FALSE</td>
<td align="left">TRUE</td>
<td align="right">47.65402</td>
<td align="right">122.3799</td>
<td align="right">1.0669589</td>
</tr>
</tbody>
</table>
<p>We can now use the second function to generate our summarized
dataset, which is de-identified and shareable:</p>
<table class="table">
<colgroup>
<col width="6%">
<col width="17%">
<col width="17%">
<col width="27%">
<col width="12%">
<col width="18%">
</colgroup>
<thead><tr class="header">
<th align="right">bout</th>
<th align="right">median_speed</th>
<th align="left">complete_day</th>
<th align="left">bout_start</th>
<th align="right">duration</th>
<th align="left">bout_category</th>
</tr></thead>
<tbody><tr class="odd">
<td align="right">1</td>
<td align="right">0.9895184</td>
<td align="left">TRUE</td>
<td align="left">2012-04-07 00:02:30</td>
<td align="right">4304.5</td>
<td align="left">non_walk_slow</td>
</tr></tbody>
</table>
The bout categories reflected in these outputs are defined as follows:
<p>
</p>
<ul>
<li>
<strong>Walk bout</strong> a <code>walk_bout</code> is defined based
on the scientific literature as: Assuming a greedy algorithm and
consideration of inactive time as consecutive, a walk bout is any
contiguous period of time where the active epochs have accelerometry
counts above the minimum threshold of 500 CPE (to allow for capture of
light physical activity such as slow walking) and the time period:
<ul>
<li>Begins with an active epoch preceded by a non-walkbout</li>
<li>Ends with an active epoch followed by at least 4 consecutive
30-second epochs of inactivity</li>
<li>Contains at least 10 cumulative 30-second epochs of activity</li>
<li>Is not a dwell bout</li>
<li>Bout median speed based on GPS data falls between 2 and 6 kilometers
per hour (our reference walking speeds)
<p>
Accordingly, the following non-walk-bouts are defined as:</p>
</li>
</ul>
</li>
<li>
<strong>Non-walk bout due to slow pace</strong> a
<code>non_walk_slow</code> bout is a bout where the median speed is too
slow to be considered walking.</li>
<li>
<strong>Non-walk bout due to fast pace</strong> a
<code>non_walk_fast</code> bout is a bout where the median speed is too
fast to be considered walking.</li>
<li>
<strong>Non-walk bout due to high CPE</strong> a
<code>non_walk_too_vigorous</code> bout is a bout where the average CPE
is too high to be considered walking (ex. running or biking).</li>
<li>
<strong>Dwell bout</strong> a <code>dwell_bout</code> is a bout
where the radius of GPS points is below our threshold for considering
someone to have stayed in one place.</li>
<li>
<strong>Non-walk bout due to incomplete GPS coverage</strong> a
<code>non_walk_incomplete_gps</code> bout is a bout where the GPS
coverage is too low to be considered complete.</li>
</ul>
<p>In order to better visualize our bouts, we can also plot the
accelerometry counts and GPS radius.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">accelerometry_counts</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/make_smallest_bout_without_metadata.html">make_smallest_bout_without_metadata</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">gps_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/generate_walking_in_seattle_gps_data.html">generate_walking_in_seattle_gps_data</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/generate_bout_plot.html">generate_bout_plot</a></span><span class="op">(</span><span class="va">accelerometry_counts</span>, <span class="va">gps_data</span>, <span class="fl">1</span><span class="op">)</span></span></code></pre></div>
<p><img src="process_bouts_files/figure-html/unnamed-chunk-2-1.png" width="700"></p>
  </main>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Lauren Blair Wilner, Stephen J Mooney.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
