<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Generate Walk Bouts • walkboutr</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png">
<link rel="icon" type="”image/svg+xml”" href="../favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
<link rel="icon" sizes="any" href="../favicon.ico">
<link rel="manifest" href="../site.webmanifest">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Generate Walk Bouts">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">walkboutr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.5.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/changing_default_parameters.html">Changing Default Parameters</a></li>
    <li><a class="dropdown-item" href="../articles/generate_data.html">Generate Data</a></li>
    <li><a class="dropdown-item" href="../articles/process_bouts.html">Generate Walk Bouts</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/rwalkbout/walkboutr/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Generate Walk Bouts</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/rwalkbout/walkboutr/blob/main/vignettes/process_bouts.Rmd" class="external-link"><code>vignettes/process_bouts.Rmd</code></a></small>
      <div class="d-none name"><code>process_bouts.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/rwalkbout/walkboutr" class="external-link">walkboutr</a></span><span class="op">)</span></span></code></pre></div>
The <code>walkboutr</code> package will process GPS and accelerometry
data and create two different outputs:
<p>
</p>
<ol style="list-style-type: decimal">
<li>
<strong>Full dataset</strong>: This dataframe contains all of the
original data (latitude, longitude, activity counts) as well as the
epoch start time. This time will match the times associated with the
accelerometry data, and the GPS data have been matched up to the closest
accelerometry epochs. The time variable returned, thus, reflects that of
the accelerometry data. <em>Note: GPS data are assigned to an epoch
start time by rounding down the time associated with the GPS datapoint
to the nearest epoch start time. For example, if epochs in the
accelerometry data are 30 seconds, the time associated with a GPS data
point will be rounded down to the nearest 30-second increment.</em>
<p></p>
</li>
<li>
<strong>Summarized dataset</strong>: This dataframe does not contain
any of the original GPS/accelerometry data, and is thus completely
de-identified and shareable. The output contains one row for each bout
(walking or otherwise) as well as information on the median speed for
that bout, whether there was a complete day worth of data for the bout,
the start time of the bout, the duration in minutes, and the bout
category. More details on bout category can be found below.</li>
</ol>
<p>First we will generate some sample data.</p>
<p>To do this, we will use the
<code><a href="../reference/generate_walking_in_seattle_gps_data.html">generate_walking_in_seattle_gps_data()</a></code> function to create
GPS data. This function generates a data frame containing GPS data for a
walking activity in Seattle, WA on April 7th, 2012. It calls the
function generate_gps_data to create a series of GPS locations and
speeds. The resulting data frame has columns for time, latitude,
longitude, and speed.</p>
<p>We will generate acceleromatry data using the
<code><a href="../reference/make_smallest_bout_without_metadata.html">make_smallest_bout_without_metadata()</a></code> function. This
function creates the smallest bout window without the metadata columns
by calling the function <code>make_smallest_bout</code> – which
generates a dataset representing the smallest bout, consisting of a
sequence of inactive periods followed by the smallest active period –
and removing the columns “non_wearing”, “complete_day”, and “bout”.</p>
<p>Together, this will give us a small sample of GPS and accelerometry
data that we can use as inputs to <code>walkboutr</code>.</p>
<p>Here we generate our sample data:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gps_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/generate_walking_in_seattle_gps_data.html">generate_walking_in_seattle_gps_data</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">accelerometry_counts</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/make_full_day_bout_without_metadata.html">make_full_day_bout_without_metadata</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>Now that we have sample data, we can look at how
<code>walkboutr</code> generates bouts:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">walk_bouts</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/identify_walk_bouts_in_gps_and_accelerometry_data.html">identify_walk_bouts_in_gps_and_accelerometry_data</a></span><span class="op">(</span><span class="va">gps_data</span>, <span class="va">accelerometry_counts</span><span class="op">)</span></span>
<span><span class="va">summary_walk_bouts</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/summarize_walk_bouts.html">summarize_walk_bouts</a></span><span class="op">(</span><span class="va">walk_bouts</span><span class="op">)</span></span></code></pre></div>
<p>The bouts identified look like this:</p>
<table class="table">
<colgroup>
<col width="4%">
<col width="12%">
<col width="14%">
<col width="18%">
<col width="11%">
<col width="11%">
<col width="8%">
<col width="9%">
<col width="9%">
</colgroup>
<thead><tr class="header">
<th align="right">bout</th>
<th align="left">bout_category</th>
<th align="right">activity_counts</th>
<th align="left">time</th>
<th align="left">non_wearing</th>
<th align="left">complete_day</th>
<th align="right">latitude</th>
<th align="right">longitude</th>
<th align="right">speed</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="right">1</td>
<td align="left">walk_bout</td>
<td align="right">500</td>
<td align="left">2012-04-07 00:03:00</td>
<td align="left">FALSE</td>
<td align="left">TRUE</td>
<td align="right">47.63629</td>
<td align="right">122.3622</td>
<td align="right">1.1009735</td>
</tr>
<tr class="even">
<td align="right">1</td>
<td align="left">walk_bout</td>
<td align="right">500</td>
<td align="left">2012-04-07 00:05:00</td>
<td align="left">FALSE</td>
<td align="left">TRUE</td>
<td align="right">47.67909</td>
<td align="right">122.4050</td>
<td align="right">2.7901428</td>
</tr>
<tr class="odd">
<td align="right">1</td>
<td align="left">walk_bout</td>
<td align="right">500</td>
<td align="left">2012-04-07 00:07:00</td>
<td align="left">FALSE</td>
<td align="left">TRUE</td>
<td align="right">47.74009</td>
<td align="right">122.4660</td>
<td align="right">0.9801357</td>
</tr>
<tr class="even">
<td align="right">1</td>
<td align="left">walk_bout</td>
<td align="right">500</td>
<td align="left">2012-04-07 00:05:30</td>
<td align="left">FALSE</td>
<td align="left">TRUE</td>
<td align="right">47.69225</td>
<td align="right">122.4182</td>
<td align="right">2.7249735</td>
</tr>
<tr class="odd">
<td align="right">1</td>
<td align="left">walk_bout</td>
<td align="right">500</td>
<td align="left">2012-04-07 00:06:00</td>
<td align="left">FALSE</td>
<td align="left">TRUE</td>
<td align="right">47.70489</td>
<td align="right">122.4308</td>
<td align="right">4.0867381</td>
</tr>
<tr class="even">
<td align="right">1</td>
<td align="left">walk_bout</td>
<td align="right">500</td>
<td align="left">2012-04-07 00:06:30</td>
<td align="left">FALSE</td>
<td align="left">TRUE</td>
<td align="right">47.72484</td>
<td align="right">122.4508</td>
<td align="right">3.0513150</td>
</tr>
</tbody>
</table>
<p>We can now use the second function to generate our summarized
dataset, which is de-identified and shareable:</p>
<table class="table">
<colgroup>
<col width="6%">
<col width="17%">
<col width="17%">
<col width="27%">
<col width="12%">
<col width="18%">
</colgroup>
<thead><tr class="header">
<th align="right">bout</th>
<th align="right">median_speed</th>
<th align="left">complete_day</th>
<th align="left">bout_start</th>
<th align="right">duration</th>
<th align="left">bout_category</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="right">1</td>
<td align="right">2.736466</td>
<td align="left">TRUE</td>
<td align="left">2012-04-07 00:02:30</td>
<td align="right">5.0</td>
<td align="left">walk_bout</td>
</tr>
<tr class="even">
<td align="right">2</td>
<td align="right">2.555720</td>
<td align="left">TRUE</td>
<td align="left">2012-04-07 00:09:30</td>
<td align="right">4304.5</td>
<td align="left">walk_bout</td>
</tr>
</tbody>
</table>
The bout categories reflected in these outputs are defined as follows:
<p>
</p>
<ul>
<li>
<strong>Walk bout</strong> a <code>walk_bout</code> is defined based
on the scientific literature as: Assuming a greedy algorithm and
consideration of inactive time as consecutive, a walk bout is any
contiguous period of time where the active epochs have accelerometry
counts above the minimum threshold of 500 CPE (to allow for capture of
light physical activity such as slow walking) and the time period:
<ul>
<li>Begins with an active epoch preceded by a non-walkbout</li>
<li>Ends with an active epoch followed by at least 4 consecutive
30-second epochs of inactivity</li>
<li>Contains at least 10 cumulative 30-second epochs of activity</li>
<li>Is not a dwell bout</li>
<li>Bout median speed based on GPS data falls between 2 and 6 kilometers
per hour (our reference walking speeds)
<p>
Accordingly, the following non-walk-bouts are defined as:</p>
</li>
</ul>
</li>
<li>
<strong>Non-walk bout due to slow pace</strong> a
<code>non_walk_slow</code> bout is a bout where the median speed is too
slow to be considered walking.</li>
<li>
<strong>Non-walk bout due to fast pace</strong> a
<code>non_walk_fast</code> bout is a bout where the median speed is too
fast to be considered walking.</li>
<li>
<strong>Non-walk bout due to high CPE</strong> a
<code>non_walk_too_vigorous</code> bout is a bout where the average CPE
is too high to be considered walking (ex. running or biking).</li>
<li>
<strong>Dwell bout</strong> a <code>dwell_bout</code> is a bout
where the radius of GPS points is below our threshold for considering
someone to have stayed in one place.</li>
<li>
<strong>Non-walk bout due to incomplete GPS coverage</strong> a
<code>non_walk_incomplete_gps</code> bout is a bout where the GPS
coverage is too low to be considered complete.</li>
</ul>
<p>In order to better visualize our bouts, we can also plot the
accelerometry counts and GPS radius.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">accelerometry_counts</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/make_smallest_bout_without_metadata.html">make_smallest_bout_without_metadata</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">gps_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/generate_walking_in_seattle_gps_data.html">generate_walking_in_seattle_gps_data</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/generate_bout_plot.html">generate_bout_plot</a></span><span class="op">(</span><span class="va">accelerometry_counts</span>, <span class="va">gps_data</span>, <span class="fl">1</span><span class="op">)</span></span></code></pre></div>
<p><img src="process_bouts_files/figure-html/unnamed-chunk-2-1.png" width="700"></p>
<p>In this plot, the black dots and lines represent the accelerometry
counts, plotted over time. The red dotted line shows us our threshold
for a bout to be considered a walk bout, which is 500 counts per epoch.
Based on this, we can see that the non-dwell walk bout starts at the
first point where the counts exceed 500, and ends at the last point
before the counts drop below 500 again.</p>
<p>The top right corner shows a circle representing the GPS radius,
which is calculated based on the GPS data. The blue part of this circle
(the small dot in the middle) represents the area that would be
considered a dwell bout based on our dwell bout radius threshold. We can
see that the GPS radius is larger than the dwell bout radius, as
indicated by the green circle (the area in which this bout took place)
being larger than the blue circle. As such, this indicates that the
person was moving through a larger space than a dwelling during this
bout.</p>
<p>Accordingly, this plot shows us that this was a non-dwell walk bout,
as the accelerometry counts exceed the threshold for a walk bout, and
the GPS radius is larger than the dwell bout radius.</p>
  </main>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Lauren Blair Wilner, Stephen J Mooney.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
